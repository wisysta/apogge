document.addEventListener("DOMContentLoaded", function () {
    const a = [
        { selector: ".brand-gold-symbol", delay: 0, type: "symbol" },
        { selector: ".brand-hero-description", delay: 300, type: "text" },
        {
            selector: ".brand-hero-description-second",
            delay: 600,
            type: "text",
        },
        { selector: ".brand-hero-description-third", delay: 900, type: "text" },
        { selector: ".brand-about-title", delay: 1200, type: "text" },
        { selector: ".demeter-content", delay: 100, type: "content" },
        { selector: ".cerezia-content", delay: 100, type: "content" },
        { selector: ".contact-info-content", delay: 100, type: "content" },
        { selector: ".brand-logo-content", delay: 100, type: "content" },
    ];
    const b = document.querySelectorAll(".timeline-item");
    c();
    const d = { threshold: 0.1, rootMargin: "0px 0px -50px 0px" };
    const e = new IntersectionObserver((f) => {
        f.forEach((g) => {
            if (g.isIntersecting) {
                const h = g.target;
                if (h.classList.contains("timeline-item")) {
                    e.unobserve(h);
                    return;
                }
                const i = h.dataset.delay || 0;
                const j = h.dataset.animationType || "default";
                setTimeout(() => {
                    if (j === "symbol") {
                        h.classList.add("animate-symbol-rotate");
                    } else {
                        h.classList.add("animate-fade-in");
                    }
                }, i);
                e.unobserve(h);
            }
        });
    }, d);
    const k = new IntersectionObserver(
        (f) => {
            f.forEach((g) => {
                if (g.isIntersecting) {
                    const h = g.target;
                    if (!h.dataset.timelineAnimated) {
                        h.dataset.timelineAnimated = "true";
                        l();
                    }
                    k.unobserve(h);
                }
            });
        },
        { threshold: 0.2, rootMargin: "0px 0px -100px 0px" }
    );
    a.forEach(({ selector: m, delay: n, type: o }) => {
        const p = document.querySelector(m);
        if (p) {
            p.dataset.delay = n;
            p.dataset.animationType = o;
            p.classList.add("fade-element");
            e.observe(p);
        }
    });
    const q = document.querySelector(".history-section");
    if (q) {
        k.observe(q);
    }
    function l() {
        b.forEach((r, s) => {
            if (r.dataset.timelineItemAnimated) {
                return;
            }
            r.dataset.timelineItemAnimated = "true";
            setTimeout(() => {
                r.classList.add("animate-timeline-fade-in");
            }, s * 600);
        });
    }
    function c() {
        const t = document.createElement("style");
        t.textContent =
            ".fade-element{opacity:0;transform:translateY(30px);transition:all 0.8s cubic-bezier(0.25,0.46,0.45,0.94);}.fade-element.animate-fade-in{opacity:1;transform:translateY(0);}.fade-element.animate-symbol-rotate{opacity:1;transform:translateY(0);animation:symbolSpinAndStop 2.5s cubic-bezier(0.25,0.46,0.45,0.94);animation-fill-mode:both;}@keyframes symbolSpinAndStop{0%{opacity:0;transform:rotate(-360deg) scale(0.3);}34%{opacity:1;transform:rotate(0deg) scale(1.1);}100%{opacity:1;transform:rotate(0deg) scale(1);}}.contact-item{opacity:0;transform:translateY(20px);transition:all 0.5s cubic-bezier(0.25,0.46,0.45,0.94);}.contact-info-content.animate-fade-in .contact-item{opacity:1;transform:translateY(0);}.contact-info-content.animate-fade-in .contact-item:nth-child(1){transition-delay:0.1s;}.contact-info-content.animate-fade-in .contact-item:nth-child(2){transition-delay:0.2s;}.contact-info-content.animate-fade-in .contact-item:nth-child(3){transition-delay:0.3s;}.brand-logo-content{opacity:0;transform:translateY(30px);transition:all 0.6s cubic-bezier(0.25,0.46,0.45,0.94);}.brand-logo-content.animate-fade-in{opacity:1;transform:translateY(0);}.animate-fade-in .timeline-item:hover{transform:translateX(10px);transition:transform 0.3s ease;}.contact-info-content.animate-fade-in .contact-item:hover{transform:translateY(-5px);transition:transform 0.3s ease;}.brand-logo-content.animate-fade-in:hover{transform:translateY(-5px);transition:transform 0.3s ease;}@media (max-width:768px){.fade-element,.timeline-fade-element{transition-duration:0.4s;}.brand-hero-content.fade-element{transition-duration:0.6s;}}@media (prefers-reduced-motion:reduce){.fade-element,.timeline-fade-element,.contact-item{transition:none;transform:none;opacity:1;}.timeline-symbol{animation:none;}}";
        document.head.appendChild(t);
    }
    function u() {
        const v = window.pageYOffset;
        const w = document.documentElement.scrollHeight - window.innerHeight;
        const x = (v / w) * 100;
        const y = document.querySelector(".scroll-progress");
        if (y) {
            y.style.width = x + "%";
        }
    }
    let z;
    window.addEventListener("scroll", () => {
        if (z) {
            cancelAnimationFrame(z);
        }
        z = requestAnimationFrame(u);
    });
    setTimeout(() => {
        const A = document.querySelector(".brand-gold-symbol");
        if (A && B(A)) {
            a.forEach(({ selector: m, delay: n, type: o }) => {
                if (m.includes("brand-")) {
                    const p = document.querySelector(m);
                    if (p) {
                        setTimeout(() => {
                            if (o === "symbol") {
                                p.classList.add("animate-symbol-rotate");
                            } else {
                                p.classList.add("animate-fade-in");
                            }
                        }, n);
                    }
                }
            });
        }
    }, 100);
    function B(C) {
        const D = C.getBoundingClientRect();
        return (
            D.top >= 0 &&
            D.left >= 0 &&
            D.bottom <=
                (window.innerHeight || document.documentElement.clientHeight) &&
            D.right <=
                (window.innerWidth || document.documentElement.clientWidth)
        );
    }
});
