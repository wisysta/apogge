function e(){const e=.01*(window.visualViewport?window.visualViewport.height:window.innerHeight);document.documentElement.style.setProperty("--vh",e+"px")}let t=window.innerHeight,n=!1;function o(){n||(e(),t=window.innerHeight,n=!0)}function s(){function e(){const e=document.getElementById("map-container");if(!e)return;const n=window.innerWidth<=768;fetch(n?"./images/map-mo.svg":"./images/map.svg").then(e=>e.text()).then(n=>{e.innerHTML=n,function(){const e=document.querySelector("#map-container svg");if(!e)return;const n=e.querySelector("#canada-round"),o=e.querySelector("#canada-circle"),s=e.querySelector("#newzealand-round"),c=e.querySelector("#newzealand-circle");n&&t(n,"0s"),o&&t(o,"0.5s"),s&&t(s,"0s"),c&&t(c,"0.5s")}(),function(){const e=document.querySelector("#map-container svg");if(!e)return;const t=e.querySelector("#canada-circle"),n=e.querySelector("#canada-dottted-line"),o=e.querySelector("#canada-text"),s=e.querySelector("#newzealand-circle"),c=e.querySelector("#newzealand-dottted-line"),i=e.querySelector("#newzealand-text");let a={state:"idle",timers:[],touchActive:!1},r={state:"idle",timers:[],touchActive:!1};function l(){"showing"!==a.state&&"shown"!==a.state&&(u(),a.state="showing",function(){n&&(n.style.opacity="1");const e=setTimeout(()=>{o&&(o.style.opacity="1",o.style.transform="translateY(0)");const e=setTimeout(()=>{a.state="shown"},400);a.timers.push(e)},300);a.timers.push(e)}())}function d(){u(),a.state="hiding",o&&(o.style.opacity="0",o.style.transform="translateY(10px)");const e=setTimeout(()=>{n&&(n.style.opacity="0");const e=setTimeout(()=>{a.state="idle"},500);a.timers.push(e)},100);a.timers.push(e)}function u(){a.timers.forEach(e=>clearTimeout(e)),a.timers=[]}function m(){"showing"!==r.state&&"shown"!==r.state&&(p(),r.state="showing",function(){c&&(c.style.opacity="1");const e=setTimeout(()=>{i&&(i.style.opacity="1",i.style.transform="translateY(0)");const e=setTimeout(()=>{r.state="shown"},400);r.timers.push(e)},300);r.timers.push(e)}())}function y(){p(),r.state="hiding",i&&(i.style.opacity="0",i.style.transform="translateY(10px)");const e=setTimeout(()=>{c&&(c.style.opacity="0");const e=setTimeout(()=>{r.state="idle"},500);r.timers.push(e)},100);r.timers.push(e)}function p(){r.timers.forEach(e=>clearTimeout(e)),r.timers=[]}function f(){a.touchActive?(a.touchActive=!1,d()):(r.touchActive=!1,y(),a.touchActive=!0,l())}function h(){r.touchActive?(r.touchActive=!1,y()):(a.touchActive=!1,d(),r.touchActive=!0,m())}n&&(n.style.opacity="0",n.style.transition="opacity 0.5s ease"),o&&(o.style.opacity="0",o.style.transform="translateY(10px)",o.style.transition="opacity 0.4s ease, transform 0.4s ease"),c&&(c.style.opacity="0",c.style.transition="opacity 0.5s ease"),i&&(i.style.opacity="0",i.style.transform="translateY(10px)",i.style.transition="opacity 0.4s ease, transform 0.4s ease"),t&&(t.addEventListener("mouseenter",l),t.addEventListener("mouseleave",function(){if(!a.touchActive){if("showing"===a.state){const e=setTimeout(()=>{d()},800);return void a.timers.push(e)}"hiding"!==a.state&&d()}}),t.addEventListener("click",f),t.addEventListener("touchend",function(e){e.preventDefault(),f()}),t.style.cursor="pointer"),s&&(s.addEventListener("mouseenter",m),s.addEventListener("mouseleave",function(){if(!r.touchActive){if("showing"===r.state){const e=setTimeout(()=>{y()},800);return void r.timers.push(e)}"hiding"!==r.state&&y()}}),s.addEventListener("click",h),s.addEventListener("touchend",function(e){e.preventDefault(),h()}),s.style.cursor="pointer"),document.addEventListener("click",function(e){const t=document.getElementById("map-container");t&&!t.contains(e.target)&&(a.touchActive=!1,r.touchActive=!1,d(),y())})}()}).catch(e=>{console.error("SVG 로드 실패:",e)})}function t(e,t){const n=document.createElementNS("http://www.w3.org/2000/svg","animate");n.setAttribute("attributeName","fill-opacity"),n.setAttribute("values","0.1;0.6;0.1"),n.setAttribute("dur","3s"),n.setAttribute("begin",t),n.setAttribute("repeatCount","indefinite"),e.appendChild(n)}let n={state:"idle",currentStep:"1",timers:[]};function o(){window.innerWidth<=768&&document.querySelector(".nav-menu")}let s=window.innerWidth<=768;!function(){const e=document.querySelector(".scroll-icon"),t=document.querySelector(".scroll-text");e&&e.addEventListener("click",function(){const e=document.getElementById("brand");if(e){const t=e.offsetTop;window.scrollTo({top:t,behavior:"smooth"})}}),t&&t.addEventListener("click",function(){const e=document.getElementById("brand");if(e){const t=e.offsetTop;window.scrollTo({top:t,behavior:"smooth"})}})}(),function(){const e=new IntersectionObserver(function(e){e.forEach(e=>{e.isIntersecting&&(e.target.style.opacity="1",e.target.style.transform="translateY(0)")})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});document.querySelectorAll(".bw-product-item, .process-step, .origin-content, .news-item, .faq-item").forEach((t,n)=>{t.style.opacity="0",t.style.transform="translateY(30px)",t.style.transition=`opacity 0.6s ease ${.1*n}s, transform 0.6s ease ${.1*n}s`,e.observe(t)})}(),function(){const e=document.querySelectorAll(".process-step");e.forEach(t=>{t.addEventListener("click",function(){const t=this.getAttribute("data-step");t!==n.currentStep&&"transitioning"!==n.state&&function(e,t){n.timers.forEach(e=>clearTimeout(e)),n.timers=[],n.state="transitioning",n.currentStep=e,t.forEach(e=>e.classList.remove("active"));const o=document.querySelector(`.process-step[data-step="${e}"]`);o&&o.classList.add("active"),function(e){const t=document.querySelectorAll(".process-image"),o=document.querySelector(`.process-image[data-step="${e}"]`),s=document.querySelector(".process-image.active");if(!o||o===s)return void(n.state="idle");s&&(s.classList.add("fade-out"),s.classList.remove("active")),o.style.transform="translateX(100%)",o.style.opacity="1",o.offsetHeight,o.classList.add("slide-in"),o.style.transform="translateX(0)";const c=setTimeout(()=>{t.forEach(e=>{e!==o&&(e.classList.remove("active","fade-out","slide-in"),e.style.opacity="0",e.style.transform="translateX(100%)")}),o.classList.remove("slide-in"),o.classList.add("active"),n.state="idle",console.log(`프로세스 스텝 ${e} 전환 완료`)},800);n.timers.push(c)}(e)}(t,e)})}),console.log(`프로세스 스텝 ${e.length}개 초기화 완료`)}(),document.querySelectorAll(".bw-product-item").forEach(e=>{const t=e.querySelector(".bw-product-image");e.addEventListener("mouseenter",function(){t.style.transform="scale(1.05)",t.style.transition="transform 0.3s ease"}),e.addEventListener("mouseleave",function(){t.style.transform="scale(1)"})}),document.querySelectorAll(".map-dot").forEach((e,t)=>{setInterval(()=>{e.style.transform="scale(1.2)",e.style.boxShadow="0 0 20px rgba(229, 184, 116, 0.6)",setTimeout(()=>{e.style.transform="scale(1)",e.style.boxShadow="none"},1e3)},3e3+1500*t),e.style.transition="all 0.5s ease"}),document.querySelectorAll(".news-item").forEach(e=>{e.addEventListener("click",function(){console.log("뉴스 아이템 클릭:",this.querySelector("h3").textContent),this.style.transform="scale(0.98)",setTimeout(()=>{this.style.transform="scale(1)"},150)}),e.style.cursor="pointer",e.style.transition="transform 0.15s ease"}),document.querySelectorAll(".btn").forEach(e=>{e.addEventListener("mouseenter",function(){this.style.transform="translateY(-2px)",this.style.boxShadow="0 4px 15px rgba(229, 184, 116, 0.3)"}),e.addEventListener("mouseleave",function(){this.style.transform="translateY(0)",this.style.boxShadow="none"}),e.addEventListener("mousedown",function(){this.style.transform="translateY(0)"}),e.addEventListener("mouseup",function(){this.style.transform="translateY(-2px)"})}),o(),function(){const e=document.createElement("div");e.style.cssText="\n            position: fixed;\n            top: 0;\n            left: 0;\n            width: 0%;\n            height: 3px;\n            background: linear-gradient(90deg, #E5B874, #37000A);\n            z-index: 9999;\n            transition: width 0.3s ease;\n        ",document.body.appendChild(e),window.addEventListener("scroll",function(){const t=window.scrollY/(document.documentElement.scrollHeight-window.innerHeight)*100;e.style.width=t+"%"})}(),p(),w(),function(){const e=document.querySelector(".hero-content");e&&(e.style.opacity="0",e.style.transform="translateY(30px)",e.style.transition="opacity 1s ease, transform 1s ease",setTimeout(()=>{e.style.opacity="1",e.style.transform="translateY(0)",console.log("히어로 컨텐츠 나타남")},5500),setTimeout(()=>{e.style.opacity="0",e.style.transform="translateY(-30px)",console.log("히어로 컨텐츠 사라짐")},11e3))}(),e(),function(){const e={root:null,rootMargin:"-50px 0px",threshold:.1},t=new IntersectionObserver(function(e,t){e.forEach(e=>{if(e.isIntersecting){const n=e.target;n.classList.contains("bw-product-header")&&(n.classList.add("fade-in"),setTimeout(()=>{const e=document.querySelector(".bw-product-swiper");e&&(e.classList.add("fade-in"),setTimeout(()=>{document.querySelectorAll(".bw-product-card").forEach(e=>{e.classList.add("fade-in-stagger")})},400))},500)),t.unobserve(n)}})},e),n=new IntersectionObserver(function(e,t){e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("visible"),t.unobserve(e.target))})},e),o=document.querySelector(".bw-product-header");o&&t.observe(o),document.querySelectorAll(".fade-in-element").forEach(e=>{n.observe(e)})}(),function(){const e=document.querySelectorAll('.nav-link[href="#main"], .nav-link[href="#brand"], .nav-link[href="#journey"]');e.forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const t=this.getAttribute("href").substring(1),n=document.getElementById(t);n&&window.scrollTo({top:n.offsetTop,behavior:"smooth"})})}),console.log(`Smooth scroll 적용 완료: ${e.length}개 링크`)}(),window.addEventListener("resize",function(){const t=window.innerWidth<=768;s!==t&&(s=t,e())}),console.log("아포제 웹사이트가 성공적으로 로드되었습니다."),window.addEventListener("resize",function(){o()})}function c(){const e=document.getElementById("contactModal");e&&(e.classList.add("active"),document.body.style.overflow="hidden")}function i(){const e=document.getElementById("contactModal");if(e){e.classList.remove("active"),document.body.style.overflow="auto";const t=document.getElementById("contactForm");t&&t.reset(),d("개인")}}function a(){const e=document.getElementById("privacyModal");e&&(e.classList.add("active"),document.body.style.overflow="hidden")}function r(){const e=document.getElementById("privacyModal");e&&(e.classList.remove("active"),document.body.style.overflow="auto")}function l(){const e=document.getElementById("privacy");e&&(e.checked=!0),m(),r()}function d(e){document.querySelectorAll(".contact-type-btn").forEach(e=>e.classList.remove("active"));const t=document.querySelector(`[data-type="${e}"]`);t&&t.classList.add("active");const n=document.getElementById("nameLabel"),o=document.getElementById("name");"개인"===e?(n.textContent="성함",o.placeholder="성함을 입력하세요"):(n.textContent="기업명",o.placeholder="기업명을 입력하세요")}async function u(e){e.preventDefault();const t=e.target,n=new FormData(t),o={type:"개인"===(document.querySelector(".contact-type-btn.active")?.dataset.type||"개인")?"PERSONAL":"BUSINESS",name:n.get("name"),phone:n.get("phone"),content:n.get("message")};try{const e=await fetch("https://before-cafe24.vercel.app/api/apogee/contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(e.ok)await e.json(),alert("문의사항이 성공적으로 접수되었습니다."),t.reset(),m(),i();else{const t=await e.json().catch(()=>({}));let n="문의 전송에 실패했습니다.";switch(e.status){case 400:n="입력 정보를 확인해주세요. 필수 항목이 누락되었거나 형식이 올바르지 않습니다.";break;case 403:n="접근이 허용되지 않습니다.";break;case 404:n="서비스를 찾을 수 없습니다.";break;case 500:n="서버 오류가 발생했습니다. 잠시 후 다시 시도해주세요.";break;default:n=t.message||"문의 전송에 실패했습니다. 다시 시도해주세요."}alert(n)}}catch(e){console.error("Contact form submission error:",e),alert("네트워크 오류가 발생했습니다. 인터넷 연결을 확인하고 다시 시도해주세요.")}}function m(){const e=document.getElementById("name"),t=document.getElementById("phone"),n=document.getElementById("message"),o=document.getElementById("privacy"),s=document.querySelector(".modal-submit-btn");if(!(e&&t&&n&&o&&s))return;const c=""!==e.value.trim(),i=""!==t.value.trim(),a=""!==n.value.trim(),r=o.checked;c&&i&&a&&r?s.classList.add("active"):s.classList.remove("active")}function y(){const e=document.getElementById("name"),t=document.getElementById("phone"),n=document.getElementById("message"),o=document.getElementById("privacy");e&&e.addEventListener("input",m),t&&t.addEventListener("input",m),n&&n.addEventListener("input",m),o&&o.addEventListener("change",m)}function p(){document.querySelectorAll(".brand-left, .brand-content").forEach(e=>{console.log("초기 상태 설정:",e.className),e.style.opacity="0",e.classList.contains("brand-left")?e.style.transform="none":e.style.transform="translateY(100px)"});const e=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&e.target.classList.contains("brand-intro")&&f()})},{threshold:.2,rootMargin:"0px 0px -150px 0px"}),t=document.querySelector(".brand-intro");t&&e.observe(t)}function f(){const e=document.querySelector(".brand-left");e&&(e.style.transition="all 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94)",e.style.opacity="1",e.style.transform="none"),console.log("1.2초 타이머 설정됨"),setTimeout(()=>{const e=document.querySelector(".brand-content");e&&(e.style.transition="all 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94)",e.style.opacity="1",e.style.transform="translateY(0)")},800)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",o):o(),window.addEventListener("orientationchange",()=>{setTimeout(()=>{e(),t=window.innerHeight},100)}),window.visualViewport&&window.visualViewport.addEventListener("resize",()=>{const n=window.visualViewport.height;Math.abs(n-t)>100&&(e(),t=n)}),document.addEventListener("DOMContentLoaded",function(){window.ApogeeLoader&&document.getElementById("apogee-loader")||s()}),window.addEventListener("apogeeLoadingComplete",function(){s()}),window.ApogeeUtils={scrollToSection:function(e){const t=document.getElementById(e);if(t){const e=t.offsetTop-100;window.scrollTo({top:e,behavior:"smooth"})}},getCurrentSection:function(){const e=document.querySelectorAll("section[id]"),t=window.scrollY+150;for(let n of e){const e=n.offsetTop,o=n.offsetHeight;if(t>=e&&t<e+o)return n.getAttribute("id")}return null}},document.addEventListener("click",function(e){const t=document.getElementById("contactModal"),n=document.getElementById("privacyModal"),o=document.querySelector(".modal-panel"),s=document.querySelector(".privacy-modal-panel");t&&t.classList.contains("active")&&(e.target.classList.contains("modal-overlay")||e.target===t&&!o.contains(e.target))&&i(),n&&n.classList.contains("active")&&(e.target.classList.contains("modal-overlay")||e.target===n&&!s.contains(e.target))&&r()}),document.addEventListener("keydown",function(e){if("Escape"===e.key){const e=document.getElementById("contactModal"),t=document.getElementById("privacyModal");e&&e.classList.contains("active")&&i(),t&&t.classList.contains("active")&&r()}}),document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("contactForm");e&&(e.addEventListener("submit",u),y(),m())}),window.openContactModal=c,window.closeContactModal=i,window.selectContactType=d,window.openPrivacyModal=a,window.closePrivacyModal=r,window.agreeAndClosePrivacyModal=l;let h=null;function w(){h=new Swiper(".bw-product-swiper",{slidesPerView:2.3,spaceBetween:30,centeredSlides:!1,loop:!0,autoplay:{delay:1e3,disableOnInteraction:!1,pauseOnMouseEnter:!1},speed:800,breakpoints:{320:{slidesPerView:1.3,spaceBetween:10,centeredSlides:!1},768:{slidesPerView:1.5,spaceBetween:10,centeredSlides:!0},1024:{slidesPerView:2.3,spaceBetween:15,centeredSlides:!1},1400:{slidesPerView:2.3,spaceBetween:20,centeredSlides:!1}},pagination:{el:".bw-swiper-pagination",type:"progressbar"},grabCursor:!0,keyboard:{enabled:!0,onlyInViewport:!0},autoHeight:!1,effect:"slide",on:{init:function(){console.log("Product Swiper 초기화 완료"),this.autoplay.stop()},slideChange:function(){const e=this.slides[this.activeIndex];if(e){const t=e.querySelector(".bw-product-card");t&&(t.style.transform="scale(1.02)",setTimeout(()=>{t.style.transform="scale(1)"},300))}}}});const e=document.querySelector(".bw-product-section");e&&new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting?h&&!h.autoplay.running&&(h.autoplay.start(),console.log("Product Swiper 자동재생 시작")):h&&h.autoplay.running&&(h.autoplay.stop(),console.log("Product Swiper 자동재생 중지"))})},{threshold:.3,rootMargin:"0px"}).observe(e)}function v(){h&&h.autoplay.start()}function g(){h&&h.autoplay.stop()}function E(){h&&h.slideNext()}function b(){h&&h.slidePrev()}window.startProductAutoplay=v,window.stopProductAutoplay=g,window.nextProductSlide=E,window.prevProductSlide=b;